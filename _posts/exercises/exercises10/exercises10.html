<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

  <!--radix_placeholder_meta_tags-->
  <title>Exercises 10</title>
  
  <meta property="description" itemprop="description" content="More exercises to help you become an econometrics superstar"/>
  
  
  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2020-11-22"/>
  <meta property="article:created" itemprop="dateCreated" content="2020-11-22"/>
  <meta name="article:author" content="Ralf Martin"/>
  
  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Exercises 10"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="More exercises to help you become an econometrics superstar"/>
  <meta property="og:locale" content="en_US"/>
  
  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Exercises 10"/>
  <meta property="twitter:description" content="More exercises to help you become an econometrics superstar"/>
  
  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output","categories","editor_options"]}},"value":[{"type":"character","attributes":{},"value":["Exercises 10"]},{"type":"character","attributes":{},"value":["More exercises to help you become an econometrics superstar\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Ralf Martin"]},{"type":"character","attributes":{},"value":["https://mondpanther.github.io/wwwmondpanther/"]}]}]},{"type":"character","attributes":{},"value":["2020-11-22"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","css","includes"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["../../webex.css"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["after_body"]}},"value":[{"type":"character","attributes":{},"value":["../../webex.js"]}]}]}]},{"type":"character","attributes":{},"value":["Exercises"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["chunk_output_type"]}},"value":[{"type":"character","attributes":{},"value":["inline"]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["adidas-superstar-EG4958.jpg","exercises10_files/bowser-1.9.3/bowser.min.js","exercises10_files/distill-2.2.21/template.v2.js","exercises10_files/jquery-1.11.3/jquery.min.js","exercises10_files/webcomponents-2.0.0/webcomponents.js","tab2.png","tab3.png","tempinv.png","womenmen.png"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->
  
  <style type="text/css">
  
  body {
    background-color: white;
  }
  
  .pandoc-table {
    width: 100%;
  }
  
  .pandoc-table>caption {
    margin-bottom: 10px;
  }
  
  .pandoc-table th:not([align]) {
    text-align: left;
  }
  
  .pagedtable-footer {
    font-size: 15px;
  }
  
  .html-widget {
    margin-bottom: 2.0em;
  }
  
  .l-screen-inset {
    padding-right: 16px;
  }
  
  .l-screen .caption {
    margin-left: 10px;
  }
  
  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .shaded-content {
    background: white;
  }
  
  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }
  
  .hidden {
    display: none !important;
  }
  
  d-article {
    padding-bottom: 30px;
  }
  
  d-appendix {
    padding-top: 30px;
  }
  
  d-article>p>img {
    width: 100%;
  }
  
  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }
  
  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  /* CSS for table of contents */
  
  .d-toc {
    color: rgba(0,0,0,0.8);
    font-size: 0.8em;
    line-height: 1em;
  }
  
  .d-toc-header {
    font-size: 0.6rem;
    font-weight: 400;
    color: rgba(0, 0, 0, 0.5);
    text-transform: uppercase;
    margin-top: 0;
    margin-bottom: 1.3em;
  }
  
  .d-toc a {
    border-bottom: none;
  }
  
  .d-toc ul {
    padding-left: 0;
  }
  
  .d-toc li>ul {
    padding-top: 0.8em;
    padding-left: 16px;
    margin-bottom: 0.6em;
  }
  
  .d-toc ul,
  .d-toc li {
    list-style-type: none;
  }
  
  .d-toc li {
    margin-bottom: 0.9em;
  }
  
  .d-toc-separator {
    margin-top: 20px;
    margin-bottom: 2em;
  }
  
  .d-article-with-toc {
    border-top: none;
    padding-top: 0;
  }
  
  
  
  /* Tweak code blocks (note that this CSS is repeated above in an injection
     into the d-code shadow dom) */
  
  d-code {
    overflow-x: auto !important;
  }
  
  pre.d-code code.d-code {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }
  
  pre.text-output {
  
    font-size: 12px;
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  @media(min-width: 768px) {
  
  d-code {
    overflow-x: visible !important;
  }
  
  pre.d-code code.d-code  {
      padding-left: 18px;
      font-size: 14px;
  }
  pre.text-output {
    font-size: 14px;
  }
  }
  
  /* Figure */
  
  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }
  
  .figure img {
    width: 100%;
  }
  
  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }
  
  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }
  
  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }
  
  
  
  /* Tweak 1000px media break to show more text */
  
  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }
  
    .grid {
      grid-column-gap: 16px;
    }
  
    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }
  
  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }
  
    .grid {
      grid-column-gap: 32px;
    }
  }
  
  
  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */
  
  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  
  
  /* Social footer */
  
  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }
  
  .disqus-comments {
    margin-right: 30px;
  }
  
  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }
  
  #disqus_thread {
    margin-top: 30px;
  }
  
  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }
  
  .article-sharing a:hover {
    border-bottom: none;
  }
  
  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }
  
  .subscribe p {
    margin-bottom: 0.5em;
  }
  
  
  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }
  
  
  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }
  
  .custom p {
    margin-bottom: 0.5em;
  }
  
  
  /* Improve display for browsers without grid (IE/Edge <= 15) */
  
  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }
  
  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }
  
  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }
  
  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }
  
  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }
  
  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }
  
  
  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }
  
  .downlevel .footnotes ol {
    padding-left: 13px;
  }
  
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }
  
  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }
  
  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }
  
  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  </style>
  
  <script type="application/javascript">
  
  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }
  
  // show body when load is complete
  function on_load_complete() {
  
    // set body to visible
    document.body.style.visibility = 'visible';
  
    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }
  
    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }
  
  function init_distill() {
  
    init_common();
  
    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);
  
    // create d-title
    $('.d-title').changeElementType('d-title');
  
    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);
  
    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();
  
    // move posts container into article
    $('.posts-container').appendTo($('d-article'));
  
    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');
  
    // create d-bibliography
    var bibliography = $('<d-bibliography></d-bibliography>');
    $('#distill-bibliography').wrap(bibliography);
  
    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;
  
    // replace citations with <d-cite>
    $('.citation').each(function(i, val) {
      appendix = true;
      var cites = $(this).attr('data-cites').split(" ");
      var dt_cite = $('<d-cite></d-cite>');
      dt_cite.attr('key', cites.join());
      $(this).replaceWith(dt_cite);
    });
    // remove refs
    $('#refs').remove();
  
    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();
  
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-toc a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });
  
    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');
  
    // replace code blocks with d-code
    $('pre>code').each(function(i, val) {
      var code = $(this);
      var pre = code.parent();
      var clz = "";
      var language = pre.attr('class');
      if (language) {
        // map unknown languages to "clike" (without this they just dissapear)
        if ($.inArray(language, ["bash", "clike", "css", "go", "html",
                                 "javascript", "js", "julia", "lua", "markdown",
                                 "markup", "mathml", "python", "svg", "xml"]) == -1)
          language = "clike";
        language = ' language="' + language + '"';
        var dt_code = $('<d-code block' + language + clz + '></d-code>');
        dt_code.text(code.text());
        pre.replaceWith(dt_code);
      } else {
        code.addClass('text-output').unwrap().changeElementType('pre');
      }
    });
  
    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {
  
      // capture layout
      var layout = $(this).attr('data-layout');
  
      // apply layout to markdown level block elements
      var elements = $(this).children().not('d-code, pre.text-output, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });
  
  
      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });
  
    // load distill framework
    load_distill_framework();
  
    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {
  
      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;
  
      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');
  
      // table of contents
      if (have_authors) // adjust border if we are in authors
        $('.d-toc').parent().addClass('d-article-with-toc');
  
      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');
  
      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }
  
      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');
  
      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");
  
      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }
  
       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }
  
      // inject pre code styles (can't do this with a global stylesheet b/c a shadow root is used)
      $('d-code').each(function(i, val) {
        var style = document.createElement('style');
        style.innerHTML = 'pre code { padding-left: 10px; font-size: 12px; border-left: 2px solid rgba(0,0,0,0.1); } ' +
                          '@media(min-width: 768px) { pre code { padding-left: 18px; font-size: 14px; } }';
        if (this.shadowRoot)
          this.shadowRoot.appendChild(style);
      });
  
      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();
  
      // clear polling timer
      clearInterval(tid);
  
      // show body now that everything is ready
      on_load_complete();
    }
  
    var tid = setInterval(distill_post_process, 50);
    distill_post_process();
  
  }
  
  function init_downlevel() {
  
    init_common();
  
     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));
  
    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
  
    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();
  
    // remove toc
    $('.d-toc-header').remove();
    $('.d-toc').remove();
    $('.d-toc-separator').remove();
  
    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });
  
  
    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);
  
    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);
  
    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();
  
    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();
  
    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));
  
    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });
  
    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));
  
    $('body').addClass('downlevel');
  
    on_load_complete();
  }
  
  
  function init_common() {
  
    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};
  
        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });
  
        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);
  
    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});
  
    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });
  
      }
    });
  
    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });
  
    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }
  
    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');
  
    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");
  
    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();
  
    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }
  
  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });
  
  </script>
  
  <!--/radix_placeholder_distill-->
  <script src="exercises10_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="exercises10_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="exercises10_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="exercises10_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->

  <link rel="stylesheet" href="..\..\webex.css" type="text/css"/>

</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Exercises 10","description":"More exercises to help you become an econometrics superstar","authors":[{"author":"Ralf Martin","authorURL":"https://mondpanther.github.io/wwwmondpanther/","affiliation":"&nbsp;","affiliationURL":"#"}],"publishedDate":"2020-11-22T00:00:00.000+00:00","citationText":"Martin, 2020"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Exercises 10</h1>
<p><p>More exercises to help you become an econometrics superstar</p></p>
</div>

<div class="d-byline">
  Ralf Martin <a href="https://mondpanther.github.io/wwwmondpanther/" class="uri">https://mondpanther.github.io/wwwmondpanther/</a> 
  
<br/>2020-11-22
</div>

<div class="d-article">
<div class="layout-chunk" data-layout="l-body">
<p><img src="adidas-superstar-EG4958.jpg" width="80%" data-distill-preview=1 /></p>
</div>
<h1 id="exercise-10.1">Exercise 10.1</h1>
<ol type="a">
<li>Suppose you estimate the gender difference in returns to education using the following mode:</li>
</ol>
<p><span class="math display">\[log(wage)=(\beta_0+\delta_0 female)+(\beta_1+\delta_1 female) \times educ + u\]</span> where wage is the hourly wage, female is a gender dummy, which is equal 1 if the individual is female, and educ is the number of years of education. Provide an interpretation if <span class="math inline">\(δ_0&lt;0\)</span> and <span class="math inline">\(δ_1&lt;0\)</span>.</p>
<div class="solution">
<button>
Answer:
</button>
<p><br> This is a linear model where the intercept men is <span class="math inline">\(\beta_0\)</span> and for women is <span class="math inline">\(\beta_0+\delta_0 female\)</span>. The change in log wages for men is <span class="math inline">\(\beta_1\)</span> whereas for women it is <span class="math inline">\(\beta_1+\delta_1 female\)</span>. Also note that because we have log wage as dependent variable, these coefficients can be interpreted as percentage changes in wage. If <span class="math inline">\(δ_0&lt;0\)</span> and <span class="math inline">\(δ_1&lt;0\)</span>, this means that women earn less for a given level of education and also that the change in wage for a given change in education (i.e. the returns to education) are lower for women.</p>
<p>The figure below illustrates this model: <img src="womenmen.png" style="width:100.0%" /> Note that <span class="math inline">\(\beta_1\)</span> represents the slope of the line for men whereas <span class="math inline">\(\delta_1\)</span> reperesents how much less the line for women is sloped compared to men.</p>
</div>
<ol start="2" type="a">
<li>Someone asserts that expected wages are the same for men and women who have the same level of education. Referring to the model in part (a), what would be your null hypothesis to test this? How you would test it.</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<p>This would require the joint hypothesis: <span class="math inline">\(δ_0=0\)</span> &amp; <span class="math inline">\(δ_1=0\)</span>. This can be implemented via a joint (F-) test; e.g. in R this can be done with the linearHypothesis Command.</p>
</div>
<ol start="3" type="a">
<li>Suppose your estimation returns the following values for the model from part (a):<br />
<span class="math inline">\(\hat{δ}_0=-0.1\)</span>, <span class="math inline">\(\hat{δ}_1=-0.01\)</span>. Based on this, what is the expected wage differential between a man and a woman with 10 years of schooling?</li>
</ol>
<div class="solution">
<button>
Hint:
</button>
<p>Man with 10 years: <span class="math inline">\(E\{log(wage)|Man\}=\beta_0+\beta_1 \times educ\)</span></p>
<p>Women with 10 years: <span class="math inline">\(E\{log(wage)|Women\}=\beta_0+\delta_0+(\beta_1+\delta_1) \times educ\)</span></p>
</div>
<p><br></p>
<div class="solution">
<button>
Answer:
</button>
<p>The wage differential between a man an women with the same 10 years of education becomes <span class="math display">\[E\{log(wage)|Man,10years\} - E\{log(wage)|Women,10 years\}=-(\delta_0+\delta_1\times 10)\]</span> <span class="math display">\[=0.1+10\times0.01=0.2\]</span> Thus we would expect the women to have a a 20% lower wage</p>
</div>
<ol start="4" type="a">
<li>Suppose you find in addition that <span class="math inline">\(β_1=0.01\)</span>. What does it imply about the effect of 5 years more of education on the expected wage of a woman?</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<p>Consequently the effect of education on women’s wages would become <span class="math inline">\(β_1+\delta_1=0.01-0.01=0\)</span>. This would mean that education has no effect on women’s wages.</p>
</div>
<ol start="5" type="a">
<li>Suppose we have estimated the following wage equation <span class="math display">\[W =10+10AGE-0.1AGE^2+ϵ\]</span> Based on this, at what age would we expect the highest wage?</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<p>The equation describes a hump shaped relationship between wages and age (since the squared term is negative). It therefore makes sense to find the top of the hump which will have an age gradient of 0. The gradient can be found by differentiating with respect to age: <span class="math display">\[\frac{\partial W}{\partial AGE}=10-0.1\times 2 \times AGE\]</span> Thus setting <span class="math inline">\(\frac{\partial W}{\partial AGE}\)</span> equal to zero leads to <span class="math display">\[AGE^{max.wage}=\frac{10}{0.1\times 2}=50\]</span></p>
</div>
<h1 id="exercise-10.2">Exercise 10.2</h1>
<p>Consider the dataset <a href="https://www.dropbox.com/s/yylc6ygkcrjir39/ets_thres_final.csv?dl=1">ets_thres_final.csv</a>. It contains emission figures (lnco2=log of CO2 emissions) for a sample of firms regulated by the European Emissions Trading System (EUETS) for the years from 2005 to 2017 although the firm identifiers have gone missing from the dataset. Note that an Emissions Trading System requires firms to buy permits for every unit of CO2 they emit. By restricting the total number of permits that are issued governments can control the total amount of emissions while allowing firms to trade permits freely so that they can be used with those businesses that find it hardest to reduce emissions. In the early days of the EU ETS (which started in 2005) permits where freely given to firms. This changed from 2013 onwards when permits where only given to certain firms and sectors that were deemed at risk from foreign competition. The variable free indicates those firms in the dataset. According to economic theory the method of permits allocation should have no effect on the eventual emissions by firms (Independence hypothesis). Firms that have been given free permits will have an incentive to reduce emissions as that frees up permits to sell within the permit market.</p>
<ol type="a">
<li>Examine this hypothesis by running a regression of lnco2 on the free variable. Report what you find.</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
library(dplyr)
df=read.csv(&quot;https://www.dropbox.com/s/yylc6ygkcrjir39/ets_thres_final.csv?dl=1&quot;)
df=df %&gt;% mutate(free=factor(free),period=factor(period))
head(df)</code></pre>
<pre><code>
  X year COUNTRY_CODE xCOU period    lnco2 free
1 1 2009           AT    1      1 9.179675    0
2 2 2010           AT    1      1 9.200492    0
3 3 2011           AT    1      1 9.326789    0
4 4 2012           AT    1      1 9.324919    0
5 5 2013           AT    1      2 9.332470    0
6 6 2014           AT    1      2 9.424483    0</code></pre>
<pre class="r"><code>
lm(lnco2~free,df) %&gt;% summary()</code></pre>
<pre><code>
Call:
lm(formula = lnco2 ~ free, data = df)

Residuals:
    Min      1Q  Median      3Q     Max 
-9.3522 -0.7237  0.0633  0.8396  6.4050 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  9.35221    0.02325  402.23   &lt;2e-16 ***
free1        0.50395    0.03361   14.99   &lt;2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.387 on 6827 degrees of freedom
  (443 observations deleted due to missingness)
Multiple R-squared:  0.03188,   Adjusted R-squared:  0.03174 
F-statistic: 224.8 on 1 and 6827 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r"><code>
df %&gt;% group_by(year) %&gt;% summarise(n())</code></pre>
<pre><code>
# A tibble: 9 x 2
   year `n()`
  &lt;int&gt; &lt;int&gt;
1  2009   808
2  2010   808
3  2011   808
4  2012   808
5  2013   808
6  2014   808
7  2015   808
8  2016   808
9  2017   808</code></pre>
</div>
</div>
<ol start="2" type="a">
<li>Provide an interpretation of the regression coefficient along with a discussion of the implications of your result.</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<p>The firms that receive free permits pollute 50% more on average over the 2009 to 2017 period.</p>
</div>
<ol start="3" type="a">
<li>The variable period is a categorical variable equal to 1 for observations from before 2013 and equal to 2 for observations from year 2013 onward. Convert it into a factor variable and run a regression of lnco2 on period. Provide an interpretation of the estimated coefficients.</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
lm(lnco2~period,df) %&gt;% summary()</code></pre>
<pre><code>
Call:
lm(formula = lnco2 ~ period, data = df)

Residuals:
    Min      1Q  Median      3Q     Max 
-9.5943 -0.7241  0.0457  0.8979  6.6685 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  9.594291   0.025888 370.602   &lt;2e-16 ***
period2     -0.001621   0.034425  -0.047    0.962    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.41 on 6827 degrees of freedom
  (443 observations deleted due to missingness)
Multiple R-squared:  3.247e-07, Adjusted R-squared:  -0.0001462 
F-statistic: 0.002216 on 1 and 6827 DF,  p-value: 0.9625</code></pre>
</div>
<p>This shows that on average emission after 2012 are .16 percent lower than before 2013, a value that is not significantly different from zero.</p>
</div>
<ol start="4" type="a">
<li>Would you say your results in part (a) provide a causal estimate of the effect of free permits?</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<p>The results in part a) confound the treatment effect with any - pre-existing - firm characteristics that might have influenced the allocation of permits. For instance it might well be that the most energy (and therefore pollution) intensive firms were given free permits.</p>
</div>
<ol start="5" type="a">
<li>With the data at hand can you propose and implement an alternative regression approach that might address any concerns raised in (d)? If yes, implement this regression and discuss its results. What does the result tell you about the Independence hypothesis discussed in the introduction?</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<p>In the dataset as it is there is actually no variable that properly captures the treatment we are interested in. <code>free</code> identifies firms that are eventually treated but it is equal to 1 also in periods when they are not treated. But it is easy to create a dummy variable, which is only equal to one for those firms that treated in periods when they are treated: we simply have to creat a dummy variable that is only true for <code>free</code> firms during period 2. Let’s try that:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
df=df %&gt;% mutate( period2Xfree= (free==1) &amp; ( as.character(period)==&quot;2&quot; ) )

lm(lnco2~period2Xfree,df) %&gt;% summary()</code></pre>
<pre><code>
Call:
lm(formula = lnco2 ~ period2Xfree, data = df)

Residuals:
    Min      1Q  Median      3Q     Max 
-9.4827 -0.7056  0.0515  0.8488  6.7445 

Coefficients:
                 Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)       9.48272    0.01980  478.84   &lt;2e-16 ***
period2XfreeTRUE  0.41000    0.03812   10.76   &lt;2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.398 on 6827 degrees of freedom
  (443 observations deleted due to missingness)
Multiple R-squared:  0.01666,   Adjusted R-squared:  0.01652 
F-statistic: 115.7 on 1 and 6827 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>At face value this would suggest that firms receiving free permits leads to 41% more CO2 emissions. However, there are at least 2 potential confounding factors: 1. The fact that firms have not been selected at random to receive permits 2. There might be time effects present. For instance, after 2013 growth might have picked up following the recession of 2008.</p>
<p>We can control for the first issue by including <code>free</code> as a control variable as (it measures how different the <code>free</code> firms were before they received free permits). The second issue we can address with a period dummy variable. Hence:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
lm(lnco2~period+free+period2Xfree,df) %&gt;% summary()</code></pre>
<pre><code>
Call:
lm(formula = lnco2 ~ period + free + period2Xfree, data = df)

Residuals:
    Min      1Q  Median      3Q     Max 
-9.3960 -0.7187  0.0645  0.8428  6.4183 

Coefficients:
                 Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)       9.39599    0.03532 265.994  &lt; 2e-16 ***
period2          -0.07722    0.04691  -1.646   0.0998 .  
free1             0.41288    0.05097   8.100 6.45e-16 ***
period2XfreeTRUE  0.16108    0.06779   2.376   0.0175 *  
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.387 on 6825 degrees of freedom
  (443 observations deleted due to missingness)
Multiple R-squared:  0.03268,   Adjusted R-squared:  0.03225 
F-statistic: 76.86 on 3 and 6825 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>Hence, this changes the the coefficient for period2Xfree quita bit; i.e. it would suggest that free permit alloction increases emission by 16% only.</p>
<p>An alternative way of implementing that is via the <code>:</code> operator which interacts (multiplies) variables “on the fly”:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
lm(lnco2~period+free+period:free,df) %&gt;% summary()</code></pre>
<pre><code>
Call:
lm(formula = lnco2 ~ period + free + period:free, data = df)

Residuals:
    Min      1Q  Median      3Q     Max 
-9.3960 -0.7187  0.0645  0.8428  6.4183 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)    9.39599    0.03532 265.994  &lt; 2e-16 ***
period2       -0.07722    0.04691  -1.646   0.0998 .  
free1          0.41288    0.05097   8.100 6.45e-16 ***
period2:free1  0.16108    0.06779   2.376   0.0175 *  
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.387 on 6825 degrees of freedom
  (443 observations deleted due to missingness)
Multiple R-squared:  0.03268,   Adjusted R-squared:  0.03225 
F-statistic: 76.86 on 3 and 6825 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<h1 id="exercise-10.3">Exercise 10.3</h1>
<p>For this question use the dataset <a href="https://www.dropbox.com/s/1xg2an5qudcahhy/hals1prep.csv?dl=1">hals1prep.csv</a>, containing data from the UK Health and Lifestyle Survey (1984-85). In this survey, several thousand people in the UK were being asked questions about their health and lifestyle.</p>
<ol type="a">
<li>The variable bmi records the body mass index (BMI) of the respondents. The BMI uses the weight and height to work out whether a weight is healthy or if someone is overweight. A value between 18.5 and 24.9 indicates a healthy weight. Based on the information below, which region of the UK had – on average – the most overweight population? Run a regression of BMI on regional categories (recorded in the variable region). Use this to figure out in which UK regions are on average outside the healthy BMI range .</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
halsx=read.csv(&quot;https://mondpanther.github.io/datastorieshub/data/hals1prep.csv&quot;)
table(halsx$ownh)</code></pre>
<pre><code>
   1    2    3    4 
1850 4563 2076  482 </code></pre>
<pre class="r"><code>
table(halsx$region)</code></pre>
<pre><code>
   east anglia  east midlands greater london          north 
           333            682            943            540 
    north west       scotland     south east     south west 
          1092            925           1607            720 
         wales  west midlands   yorks/humber 
           498            823            808 </code></pre>
<pre class="r"><code>
#summary(lm(bmi~ region, halsx))
summary(lm(bmi~0+ region, halsx))</code></pre>
<pre><code>
Call:
lm(formula = bmi ~ 0 + region, data = halsx)

Residuals:
     Min       1Q   Median       3Q      Max 
-12.3808  -2.8505  -0.5398   2.2378  30.3695 

Coefficients:
                     Estimate Std. Error t value Pr(&gt;|t|)    
regioneast anglia     24.5650     0.2417   101.6   &lt;2e-16 ***
regioneast midlands   24.6908     0.1723   143.3   &lt;2e-16 ***
regiongreater london  24.0111     0.1506   159.4   &lt;2e-16 ***
regionnorth           24.6737     0.1943   127.0   &lt;2e-16 ***
regionnorth west      24.7005     0.1371   180.2   &lt;2e-16 ***
regionscotland        24.9136     0.1504   165.7   &lt;2e-16 ***
regionsouth east      24.0898     0.1107   217.6   &lt;2e-16 ***
regionsouth west      24.7633     0.1694   146.2   &lt;2e-16 ***
regionwales           25.2405     0.2071   121.9   &lt;2e-16 ***
regionwest midlands   24.5064     0.1614   151.8   &lt;2e-16 ***
regionyorks/humber    24.6052     0.1585   155.3   &lt;2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 4.08 on 7260 degrees of freedom
  (1700 observations deleted due to missingness)
Multiple R-squared:  0.9731,    Adjusted R-squared:  0.9731 
F-statistic: 2.392e+04 on 11 and 7260 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>If we drop the intercept by writing <code>0+...</code> the dummies represent the average BMI values. We that Wales has the highest, with both Scotland and Wales above 24.9 and all other regions within the healthy range.</p>
</div>
<ol start="2" type="a">
<li>The variable ownh_num records responses to the question “Would you say that for someone of your age your own health in general is…” where users had the following response options: • Excellent (1) • Good (2) • Fair (3) • Poor (4) The numbers in brackets indicate how these options were recorded in the <code>ownh_num</code> variable. Run a regression of <code>ownh_num</code> on <code>bmi</code> and provide a discussion of what you find. Is it in line with your expectations on this?</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
lm(ownh_num~bmi , halsx) %&gt;% summary()</code></pre>
<pre><code>
Call:
lm(formula = ownh_num ~ bmi, data = halsx)

Residuals:
    Min      1Q  Median      3Q     Max 
-1.4558 -0.2020 -0.1069  0.8016  2.0259 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 1.777801   0.056678  31.367  &lt; 2e-16 ***
bmi         0.014155   0.002278   6.213 5.48e-10 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.7948 on 7269 degrees of freedom
  (1700 observations deleted due to missingness)
Multiple R-squared:  0.005283,  Adjusted R-squared:  0.005146 
F-statistic:  38.6 on 1 and 7269 DF,  p-value: 5.481e-10</code></pre>
</div>
<p>An increase in the BMI by 1 unit increases the health score 0.014 units. Because a higher value of the score implies worse health this suggests a reduction in health which is line with expectations.</p>
</div>
<ol start="3" type="a">
<li>Can you think of at least two reasons why the estimate in b) does not provide a correct representation of the causal relationship between bmi and health?</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<p>There might be a variety of confounding factors; e.g. richer people might be healthier and less overweight because they can afford higher quality food (making them slimmer) as well as better medical care (making them healthier for reasons unrelated to food intake and weight). Hence, because in this scenario money is negatively correlated with both BMI and the onwnh_num health score this leads to an upward bias; i.e. the coefficient would be lower in reality than what we found.</p>
<p>Education might play a similar role; i.e. better educated people will be healthier for a range of reasons (e.g. knowledge about health and how get the best care) and the same knowledge might also allow them to eat better and gain less weight.</p>
<p>There might also be a direct reverse causality: people who are sicker might find it hard to exercise and/or make the effort of doing high quality cooking which would again lead to an upward bias in our regression.</p>
<p>However, note that one could imagine that this also goes the other way round: many diseases lead to extreme weight loss which would imply a downward bias in our regression.</p>
<p>Age might be an other issue. Most people get a bit fatter as they age (well at least I do). Now the question asks to consider age when answering the question. However, there might be a systematic bias in how people respond to such questions. E.g. suppose older people tend to get more content than younger people so that they are more often just happy with their health. This would mean that age has a negative effect (more healthy) on the dependent variable. At the same time there is a positive effect on BMI. This would mean a negative correlation between errors and omitted variable implying a downward bias.</p>
<p>Again the bias could go the other way round if for instance older people are more likely to become hypochondriacs.</p>
</div>
<ol start="4" type="a">
<li>The dataset includes several additional control variables. These include</li>
</ol>
<p>• incomeB a categorical variable representing income brackets where “1” represents the lowest and “12” the highest income group. • agyrs – a variable recording the age of the participant</p>
<p>Include those in the regression of reported health from b) Discuss what the output suggests about the relationships between health and age, and health and income. Are they in line with what you would have expected? In each case can you provide an explanation for the kind of relationship found?</p>
<p>Also discuss the usefulness of including both the age and income controls for estimating the causal effect of BMI. In each case discuss at least one reason for and one reason against including these controls. [5 points]</p>
<div class="solution">
<button>
Answer:
</button>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
lm(ownh_num~bmi+agyrs+factor(incomeB) , halsx) %&gt;% summary()</code></pre>
<pre><code>
Call:
lm(formula = ownh_num ~ bmi + agyrs + factor(incomeB), data = halsx)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.64142 -0.34612 -0.08213  0.65138  2.18574 

Coefficients:
                    Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)        1.9586826  0.1242120  15.769  &lt; 2e-16 ***
bmi                0.0123175  0.0025664   4.800 1.63e-06 ***
agyrs             -0.0018862  0.0006752  -2.794  0.00523 ** 
factor(incomeB)2   0.1639262  0.1097212   1.494  0.13522    
factor(incomeB)3   0.1738317  0.1087402   1.599  0.10997    
factor(incomeB)4   0.0090082  0.1099935   0.082  0.93473    
factor(incomeB)5  -0.0846940  0.1069890  -0.792  0.42862    
factor(incomeB)7  -0.2736317  0.1124488  -2.433  0.01499 *  
factor(incomeB)8  -0.2231460  0.1126696  -1.981  0.04769 *  
factor(incomeB)9  -0.1422836  0.1116748  -1.274  0.20268    
factor(incomeB)10 -0.2764668  0.1221840  -2.263  0.02369 *  
factor(incomeB)12 -0.3545969  0.1246759  -2.844  0.00447 ** 
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.7814 on 5699 degrees of freedom
  (3260 observations deleted due to missingness)
Multiple R-squared:  0.03819,   Adjusted R-squared:  0.03633 
F-statistic: 20.57 on 11 and 5699 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>The health score for higher income bands is lower suggesting richer people tend to be healthier (or at least report to be healther). This is inline what we would expect: richer people can afford better health care, live in healthier houses, in better neighbourhoods with less pollution etc.</p>
<p>The relation between age and health seems a bit more surprising as it suggests that older people report being healthier. But we have to remind ourselves that the question asked “how is your health given your age”. Hence, it could mean that older people lower their standards and are more content.</p>
<p>Another more sinister explanation is the following: suppose each generation has some people that are inherently healthy (e.g. based on their genes) and other that more sickly. Clearly we would expect the healthier to be less likely to die and thereby get older. This would mean that even if people respond in exactly the same to the health question throughout their life the only old people remaining to respond to the survey are the ones that always responded as being in great health.</p>
<p>We would want to include those variables if there is concern regarding some of the biases discussed in part c). For that they do not only need to have an affect on the dependent variable (health score) but also cause some of the variation in the BMI explanatory variable. See part c) for a more elaborate discussion.</p>
<p>An important reason not to include those is if we think the causal chain goes the other way round; e.g. it could be that people who are overweight have harder time in the job market making them poorer. Equally, being overweight might affect your chances of survival and thereby your age.</p>
</div>
<ol start="5" type="a">
<li>Consider the R output below. It builds a new dataframe as a transformation the dataframe halsx with the health survey data. ownh_num is defined as in b). Can you provide an interpretation for the coefficients of the linear regression reported at the end of R output? Note that the rbind() command combines dataframes vertically .</li>
</ol>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
labels=c(&quot;excellent&quot;, &quot;good&quot;, &quot;fair&quot;, &quot;poor&quot;)

for(i in 1:4){
  fr=halsx
  fr[&#39;dum&#39;]=fr$ownh_num==i
  fr[&#39;label&#39;]=labels[i]
  if(i==1){
     longframe=fr
  }
  else {
    
    longframe=rbind(longframe,fr)
  }
  
  print(nrow(longframe))

}  </code></pre>
<pre><code>
[1] 8971
[1] 17942
[1] 26913
[1] 35884</code></pre>
<pre class="r"><code>
summary(lm(dum~label,longframe))</code></pre>
<pre><code>
Call:
lm(formula = dum ~ label, data = longframe)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.50864 -0.23141 -0.20622  0.08254  0.94627 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  0.206220   0.004231   48.74  &lt; 2e-16 ***
labelfair    0.025192   0.005984    4.21 2.56e-05 ***
labelgood    0.302419   0.005984   50.54  &lt; 2e-16 ***
labelpoor   -0.152491   0.005984  -25.48  &lt; 2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.4007 on 35880 degrees of freedom
Multiple R-squared:  0.1436,    Adjusted R-squared:  0.1435 
F-statistic:  2005 on 3 and 35880 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="solution">
<button>
Answer:
</button>
<p>The regression reports the share of responses to the health question in the data; i.e. from the intercept we can see that 20.6% of respondents report excellent health. (20.6+2.5)% respond that their health is fair and so on.</p>
</div>
<h1 id="exercise-10.4">Exercise 10.4</h1>
<p>Air pollution has been shown to have a variety of adverse health effects. Recently, researchers have also started to investigate other negative effects. Below we report regression tables from a study that investigates a link between air pollution and car accidents.</p>
<ol type="a">
<li>Can you suggest a causal mechanism that might explain why air pollution could have an effect on car accidents?</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<p>Air pollution affects the respiratory system. If people cannot breathe so well that might eventually affect their brain. Drivers might consequently be less able to focus and therefore are more likely to cause accidents. Pollution could also cause poorer visibility that leads to accidents.</p>
</div>
<ol start="2" type="a">
<li>Table 3 below, extracted from an academic paper, reports various regressions of the log number of accidents per day across geographic grid cells for the UK over a period from 2009 to 2014. Column 6 provides a simple OLS regression of accidents on pollution concentration (measured as micro grams per cubic meter of PM). Can you think of reasons why this might not be a valid estimate of the causal impact?</li>
</ol>
<p><img src="tab3.png" style="width:100.0%" /></p>
<div class="solution">
<button>
Answer:
</button>
<p>There are a number of potentially confounding factors for instance traffic: more traffic will cause more pollution but also makes accidents more likely. Similarly: weather factors such as heat or clouds induce more pollution but could also lead to more (or less accidents). Weather could also work the other way round: rain could reduce pollution, while increasing accidents; i.e. because pollution is negatively correlated with rain and rain positively with accidents we have a downward bias.</p>
<p>Moreover, there could be a direct reverse causality: accidents cause traffic jams which increases pollution.</p>
</div>
<ol start="3" type="a">
<li>Column 7 of Table 3 in sub-question (b) repeats the same regression including various variables measuring weather conditions as well as region interacted with year, month and day of the week fixed effects/dummies. Would you say this provides a better estimate of the causal effect of pollution? Could it also lead to a worse estimate?</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<p>By including a range of weather controls we address some of the points raised in (b) which should be an improvement. However, a concern with weather variables as controls is that while on the one hand weather can cause pollution and accidents, pollution could also cause the weather (e.g. clouds forming because of particulate pollution) which in turn could affect accidents. The estimate in column 7 would not account for this causal effect.</p>
</div>
<ol start="4" type="a">
<li>The study proposes an instrument for pollution derived from a weather phenomenon known as temperature inversion. Temperature inversion occurs from time to time when a layer of warmer air sits on top of colder air nearer to the ground. As consequence pollution is trapped near the ground and cannot easily escape. Thus, all else equal, pollution will be more severe near the ground when this happens. Meteorological studies suggest that the phenomenon is driven by wider movements in the atmosphere and crucially is not itself driven by local pollution. Table 2 reports regressions of the pollution variable from Table 3 on a binary variable that is equal to 1 if a temperature inversion is occurring in a particular area at a particular time. Discuss what this table is telling us.</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<p>Table 2 reports first stage regressions for this instrument. This allows us to check one of the three criteria for a valid instrument, namely if it is a strong driver of the relevant endogenous variable. This seems to be the case here: not only is the inversion variable significant, the F-statistic is also rather high (larger than 10).</p>
</div>
<p><img src="tab2.png" style="width:80.0%" /></p>
<ol start="5" type="a">
<li>Columns 1 to 3 of Table 3 in sub-question (b) report 2 stage least squares regressions using the temperature inversion as instrument. Discuss if this provides a better estimate of the causal effect of pollution on accidents. Can you comment on the relative size of the coefficients comparing columns 1 and 6? Are they in line with what you would expect?</li>
</ol>
<div class="solution">
<button>
Answer:
</button>
<p><br> Given that Temperature inversions are likely not driven by pollution this could get round issues such as the traffic-&gt; pollution nexus. However, it is also likely that inversions drive other potentially pollution causing weather events (e.g. clouds, rain). However, we can deal with that by including weather variables (as done in column 3). Of course, the same disclaimer applies as in par c); i.e. we might miss out on parts of the causal effect by doing that. Note that the effect of pollution becomes actually stronger when using the instrument (e.g. compare column 1 and 6, but also 3 vs 7). This suggest that it addresses an endogeneity arising from a negative correlation between un-observed heterogeneity and the endogenous variable in 6; e.g. it could be the case that there are less accidents when traffic goes up (and therefore pollution goes up) because traffic is moving more slower.</p>
<p><br> The picture below summarises the various issues we discussed in this question:</p>
<p><img src="tempinv.png" style="width:100.0%" /> Firstly, our goal is to identify the causal effect of pollution on accidents. This comprises of direct effect (e.g. via bad visibility) represented by arrow a. This could also include more indirect effects via weather shown as arrows b and c. Simple OLS estimates of accidents on pollution will be biased because of confounding factors such as effects from traffic or weather on both pollution and accidents. Indeed accidents themselves could affect traffic which in turn could affect pollution (arrow i). Controlling for counfounding factors such as traffic or weather can be helpful in finding a non-biased estimate. However, it also could mean that we ignore part of the causal effect we hope to find; e.g. in the figure we would miss out the path shown via arrow b and c if we control for weather. An instrument such as temperature inversion is helpful as it drives pollution and is likely not affected by any endogenous factors (i.e. that ensures criterion 1 and 2 of IV estimation). However, there could be an issue with criterion 3 in an IV regression without further controls because Temperature Inversion is not only having an effect on pollution but it might also cause a range of other weather phenomena. If we include weather as an additional control as in column 3 we will avoid this issue. However, we also might again shut down channel b-c. The good news in Table 3 is that with or without weather variables we find the same effect from pollution which would suggest that channel b-c might not be so relevant.</p>
</div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<script>

/* update total correct if #total_correct exists */
update_total_correct = function() {
  if (t = document.getElementById("total_correct")) {
    t.innerHTML =
      document.getElementsByClassName("correct").length + " of " +
      document.getElementsByClassName("solveme").length + " correct";
  }
}

/* solution button toggling function */
b_func = function() {
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "");
  }
  
  if (my_answer !== "" & real_answers.includes(my_answer)) {
    cl.add("correct");
  } else {
    cl.remove("correct");
  }
  update_total_correct();
}

window.onload = function() {
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('solution')) {
      buttons[i].onclick = b_func;
    }
  }
  
  /* set up solveme inputs */
  var solveme = document.getElementsByClassName("solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off"); 
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";
    
    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;
    
    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  update_total_correct();
}

</script>
<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
