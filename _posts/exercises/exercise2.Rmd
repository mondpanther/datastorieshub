---
title: "Exercises 2"
description: |
  Exercises to get familiar with R.
author:
  - name: Ralf Martin
    url: https://mondpanther.github.io/wwwmondpanther/
date: "`r Sys.Date()`"
output:
  distill::distill_article:
    self_contained: true
    css: webex.css
    includes:
      after_body: webex.js
categories:
  - Exercises
editor_options: 
  chunk_output_type: inline
---



```{r setup, include = FALSE, message=FALSE}
library("webex")
library(ggplot2)
knitr::opts_chunk$set(fig.path='../../images/')
```



# Exercise 1.1

In the lecture we introduced R. The goal of this problem set is for you to work with R by yourself, so that you start to become comfortable with some basic commands, which will be needed throughout the course (and beyond?). Hence, even if you think you could answer a question with a different software package, could you please try using R?

In this exercise we are using a dataset called `auto.csv`. It contains various characteristics for a sample of cars.
You can download this dataset from [here](https://www.dropbox.com/s/gm22o5efboc3q0w/auto.csv?dl=1) from the course data repository. Note that a big part of working with data is to become familiar with different data formats. R can easily work with almost any dataformat imaginable but only if the user (i.e. you) gives it the right instructions. You are probably already familiar with the `.csv` format. But just in case not: `csv` stands for comma separated values. In other words: this is a table with arranged as a simple text file where rows represent table rows and the values that go into separate columns are separated by commas. 

To do anything with data you need get a dataset into a dataframe (essentially another word for table) in memory. For that you can first store it on your computer's harddrive and then  load it. You can do that using RStudio's import file menu very similar to how you would open an Excel worksheet, say:

```{r out.extra='style="max-width: 500px"', echo=F}
knitr::include_graphics("../../images/fileimport.png")
```


### Part (a) 
Instead of using the import dialog, can you load the dataset with an R command either from the console command line or via an R script?


`r hide("Hint:")`

If you use the RStudio dialog just discussed it will show you the R command that is needed in the Console window

`r unhide()`

`r hide("Answer:")`
```{r load auto, echo = TRUE}
auto <- read.csv("C:/Users/Ralf Martin/Dropbox/datastories/data/auto.csv", header=TRUE)


```

Of course the exact formulation depends on where you saved your file on disk; i.e. it is unlikely it will be in a directory called `C:/Users/Ralf Martin/Dropbox/datastories/data/`.

Note that `header=TRUE` means that R can figure out the column names from the first line of the `auto.csv` file.
`r unhide()`



### Part (b)
Can you suggest an alternative version of the previous command with a relative path to locate the file?
`r hide("Answer:")`
```{r, echo = TRUE}
getwd()
```

To write a relative path you need to know which the current active directory is. With the `getwd()` command you can find out. In my case this happens to be the  `C:/Users/Ralf Martin/Dropbox/datastories/datastorieshub/_posts/exercises` directory. Hence to get to directory `C:/Users/Ralf Martin/Dropbox/datastories/data` we need to go 3 directories up (to directory `C:/Users/Ralf Martin/Dropbox/datastories` ) and then down into the data directory. Note that you can use `..` to indicate to R that you want to move up one layer of the directory structure. Hence the corect command with relative path notation becomes:

```{r, echo = TRUE}
auto <- read.csv("../../../data/auto.csv", header=TRUE)

```



`r unhide()`


### Part (c)
Probably the easiest way to load a web based CSV file into R is directly from the web. This can be achieved by using the file URL in the `read.csv` command. Can you work out how?


`r hide("Answer:")`
```{r, echo = TRUE}
auto <- read.csv("https://www.dropbox.com/s/gm22o5efboc3q0w/auto.csv?dl=1", header=TRUE)

```

You can figure out the URL by right clicking on a hyperlink.
`r unhide()`


### Part (d)
Describe the data set. 

How many observations does the data set have? `r fitb(nrow(auto))`

and how many variables does it have? `r fitb(ncol(auto))`

What variables are contained in the dataset?

`r hide("Hint:")`
R commands you might want to use for that include summary, nrow, ncol. You can try to type ?<name of function> in the RStudio console to learn more about the function. Alternatively, try googling and see how people use those functions.
`r unhide()`

`r hide("Answer:")`
```{r, echo = TRUE}
# Summary stats for all variables
summary(auto)

# Number of observations:
nrow(auto)

#Number of variables
ncol(auto)


#Just the names of all variables
names(auto)
```


### Part (c)
Much of the power of R derives from extensions (so called packages) that have been contributed to widen the capabilities of the basic software. A particularly nice extension are the dplyr and tidyr packages that allow vastly more efficient and transparent wrangling of data. Can you install those packages on your computer and load them into memory?


`r hide("Answer:")`
To install these packages use 
`install.packages("dplyr","tydr")`

Note that you only need to do this once on a given computer (it's like installing software).
However, each time you re-start R you need to load the packages you want to use into memory again. For that you use

```{r,echo=TRUE}
library(dplyr,tidyr)
```
`r unhide()`




auto %>% summary()

nrow(auto)
```






library(dplyr)
library(tidyr)

auto_new <- tbl_df(mtcars)

auto.sum <- df %>%
  select(mpg, cyl, vs, am, gear, carb) %>% # select variables to summarise
  summarise_each(funs(min = min, 
                      q25 = quantile(., 0.25), 
                      median = median, 
                      q75 = quantile(., 0.75), 
                      max = max,
                      mean = mean, 
                      sd = sd))


```

You can figure out the URL by right clicking on a hyperlink.
`r unhide()`


